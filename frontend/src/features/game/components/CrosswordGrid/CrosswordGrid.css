/* ==========================================
   CROSSWORD GRID STYLES
   Extends base Grid.css styles for crossword-specific styling
   ========================================== */

/* Import shared grid styles - adjust path if needed */
@import '../Grid/Grid.css';

/* ==========================================
   CROSSWORD CELL STYLES
   ========================================== */

.crossword-cell {
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--cell-border);
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-cell);
    background: var(--cell-bg);
    color: var(--text-primary);
    font-family: 'Clear Sans', 'Trebuchet MS', 'Arial', sans-serif;
    letter-spacing: 0.03em;
    transition: background var(--transition-normal),
        box-shadow var(--transition-normal),
        border-color 0.2s;
    position: relative;
}

/* Blank/filler cells - non-interactive */
.crossword-cell.blank {
    background: transparent;
    border: none;
    box-shadow: none;
    pointer-events: none;
}

/* Active/focused cell */
.crossword-cell.active {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.3);
    z-index: 2;
}

/* Filled cell */
.crossword-cell.filled {
    background: var(--cell-bg);
}

/* Disabled/solved cells */
.crossword-cell.disabled {
    cursor: default;
}

.crossword-cell.correct {
    background: var(--cell-found);
    border-color: var(--success);
}

/* Wrong phrase highlighting */
.crossword-cell.wrong {
    background: rgba(244, 67, 54, 0.15);
    border-color: #f44336;
    border-color: #f44336;
    box-shadow: 0 0 8px rgba(244, 67, 54, 0.4);
}

/* Focused phrase highlighting */
.crossword-cell.highlighted {
    background: rgba(255, 193, 7, 0.2);
}

[data-theme="dark"] .crossword-cell.highlighted {
    background: rgba(255, 193, 7, 0.15);
}

/* Shake animation for wrong answers */
@keyframes shake {

    0%,
    100% {
        transform: translateX(0);
    }

    10%,
    30%,
    50%,
    70%,
    90% {
        transform: translateX(-4px);
    }

    20%,
    40%,
    60%,
    80% {
        transform: translateX(4px);
    }
}

.crossword-cell.shake {
    animation: shake 0.5s ease-in-out;
}

/* Start number styling */
.start-number {
    pointer-events: none;
    user-select: none;
}

/* Input field within cell */
.crossword-input {
    font-family: inherit;
}

.crossword-input:disabled {
    color: inherit;
    opacity: 1;
    -webkit-text-fill-color: inherit;
}

/* ==========================================
   CROSSWORD GRID CONTAINER
   ========================================== */

.crossword-grid-container {
    touch-action: manipulation;
    user-select: none;
    -webkit-user-select: none;
    border-radius: 8px;
    padding: 8px;
}

.crossword-grid-container.light-mode {
    background-color: #f5f5f5;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] .crossword-grid-container {
    background-color: #23272e;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.7);
}

/* ==========================================
   PHRASE LIST / CLUES STYLING
   ========================================== */

.crossword-clues {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.crossword-clues-section {
    padding: 12px;
    border-radius: 8px;
    background: var(--surface);
}

.crossword-clues-title {
    font-weight: 600;
    margin-bottom: 8px;
    padding-bottom: 4px;
    border-bottom: 1px solid var(--divider);
}

.crossword-clue {
    display: flex;
    gap: 8px;
    padding: 4px 0;
    cursor: pointer;
    transition: background 0.2s;
}

.crossword-clue:hover {
    background: rgba(var(--primary-rgb), 0.1);
}

.crossword-clue.completed {
    text-decoration: line-through;
    opacity: 0.6;
}

.crossword-clue-number {
    font-weight: 600;
    min-width: 24px;
}

.crossword-clue-text {
    flex: 1;
}

/* ==========================================
   DARK MODE ADJUSTMENTS
   ========================================== */

[data-theme="dark"] .crossword-cell {
    --cell-border: #444;
}

[data-theme="dark"] .crossword-cell.active {
    border-color: #90caf9;
    box-shadow: 0 0 0 3px rgba(144, 202, 249, 0.3);
}

[data-theme="dark"] .crossword-cell.wrong {
    background: rgba(244, 67, 54, 0.25);
    box-shadow: 0 0 8px rgba(244, 67, 54, 0.5);
}

[data-theme="dark"] .start-number {
    color: #aaa;
}

/* ==========================================
   RESPONSIVE DESIGN
   ========================================== */

@media (max-width: 900px) {
    .crossword-grid-container {
        padding: 4px;
    }
}

/* Pulsating wrong highlight (Level 2 verification) */
@keyframes pulse-wrong {
    0% {
        background-color: rgba(244, 67, 54, 0.1);
    }

    50% {
        background-color: rgba(244, 67, 54, 0.4);
    }

    100% {
        background-color: rgba(244, 67, 54, 0.1);
    }
}

.crossword-cell.pulsating {
    animation: pulse-wrong 1s ease-in-out infinite;
    border-color: #f44336;
}

[data-theme="dark"] .crossword-cell.pulsating {
    border-color: #ff5252;
}

/* ==========================================
   BLINKING CURSOR (Terminal-style)
   ========================================== */

@keyframes blink-cursor {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0;
    }
}

.crossword-cell .cursor {
    position: absolute;
    background: var(--primary, #1976d2);
    left: 50%;
    top: 50%;
    animation: blink-cursor 1s step-end infinite;
    pointer-events: none;
    z-index: 2;
}

/* Horizontal cursor (for 'across' phrases) - like an underscore */
.crossword-cell .cursor.horizontal {
    width: 60%;
    height: 2px;
    transform: translate(-50%, 100%);
    top: 70%;
}

/* Vertical cursor (for 'down' phrases) - like a pipe */
.crossword-cell .cursor.vertical {
    width: 2px;
    height: 60%;
    transform: translate(-50%, -50%);
}

[data-theme="dark"] .crossword-cell .cursor {
    background: #90caf9;
}

/* ==========================================
   WHOLE PHRASE BLINK (Navigation Aid)
   ========================================== */
@keyframes phrase-blink {
    0%, 100% { background-color: var(--cell-bg); }
    50% { background-color: rgba(25, 118, 210, 0.3); } /* Primary color low opacity */
}

[data-theme="dark"] @keyframes phrase-blink {
    0%, 100% { background-color: var(--cell-bg); }
    50% { background-color: rgba(144, 202, 249, 0.3); } /* Dark mode primary */
}

.crossword-cell.blinking {
    animation: phrase-blink 0.4s ease-in-out 3;
    z-index: 1;
}